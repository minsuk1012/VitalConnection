{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/choiminsuk/Desktop/vitalconnection%20%281%29/lib/supabaseAdmin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseUrl || !supabaseServiceRoleKey) {\n  console.warn(\"Missing Supabase Service Role Key or URL\") \n}\n\n// Note: This client has admin privileges. Use ONLY on the server.\nexport const supabaseAdmin = createClient(supabaseUrl || '', supabaseServiceRoleKey || '', {\n  auth: {\n    autoRefreshToken: false,\n    persistSession: false\n  }\n})\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,yBAAyB,QAAQ,GAAG,CAAC,yBAAyB;AAEpE,IAAI,CAAC,eAAe,CAAC,wBAAwB;IAC3C,QAAQ,IAAI,CAAC;AACf;AAGO,MAAM,gBAAgB,IAAA,8LAAY,EAAC,eAAe,IAAI,0BAA0B,IAAI;IACzF,MAAM;QACJ,kBAAkB;QAClB,gBAAgB;IAClB;AACF"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/choiminsuk/Desktop/vitalconnection%20%281%29/app/admin/actions.ts"],"sourcesContent":["'use server'\n\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\nimport { supabaseAdmin } from '@/lib/supabaseAdmin'\n\nconst ADMIN_ID = 'vitalconnect'\nconst ADMIN_PW = 'vitalconnect123!'\nconst COOKIE_NAME = 'admin_session'\n\nexport async function loginAdmin(formData: FormData) {\n  const id = formData.get('id') as string\n  const password = formData.get('password') as string\n\n  if (id === ADMIN_ID && password === ADMIN_PW) {\n    const cookieStore = await cookies()\n    cookieStore.set(COOKIE_NAME, 'true', {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      maxAge: 60 * 60 * 24, // 1 day\n      path: '/',\n    })\n    redirect('/admin')\n  } else {\n    return { error: '아이디 또는 비밀번호가 잘못되었습니다.' }\n  }\n}\n\nexport async function logoutAdmin() {\n  const cookieStore = await cookies()\n  cookieStore.delete(COOKIE_NAME)\n  redirect('/admin/login')\n}\n\nexport async function getConsultations() {\n  // Ensure we are in an admin session (double check)\n  const cookieStore = await cookies()\n  const hasSession = cookieStore.has(COOKIE_NAME)\n  \n  if (!hasSession) {\n    throw new Error(\"Unauthorized\")\n  }\n\n  const { data, error } = await supabaseAdmin\n    .from('consultations')\n    .select('*')\n    .order('created_at', { ascending: false })\n\n  if (error) {\n    console.error(\"Error fetching consultations:\", error)\n    return []\n  }\n\n  return data\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAAA;AACA;;;;;;AAEA,MAAM,WAAW;AACjB,MAAM,WAAW;AACjB,MAAM,cAAc;AAEb,eAAe,WAAW,QAAkB;IACjD,MAAM,KAAK,SAAS,GAAG,CAAC;IACxB,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI,OAAO,YAAY,aAAa,UAAU;QAC5C,MAAM,cAAc,MAAM,IAAA,0IAAO;QACjC,YAAY,GAAG,CAAC,aAAa,QAAQ;YACnC,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK;YAClB,MAAM;QACR;QACA,IAAA,iMAAQ,EAAC;IACX,OAAO;QACL,OAAO;YAAE,OAAO;QAAwB;IAC1C;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;IACnB,IAAA,iMAAQ,EAAC;AACX;AAEO,eAAe;IACpB,mDAAmD;IACnD,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,aAAa,YAAY,GAAG,CAAC;IAEnC,IAAI,CAAC,YAAY;QACf,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAa,CACxC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE1C,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,EAAE;IACX;IAEA,OAAO;AACT;;;IA5CsB;IAkBA;IAMA;;AAxBA,+OAAA;AAkBA,+OAAA;AAMA,+OAAA"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/choiminsuk/Desktop/vitalconnection%20%281%29/.next-internal/server/app/admin/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logoutAdmin as '0071866df52b369be2de539cc2a03c741db2592fee'} from 'ACTIONS_MODULE0'\nexport {getConsultations as '007fbd9345e8ae4a60ba9b27e40794b2372e6388bd'} from 'ACTIONS_MODULE0'\nexport {loginAdmin as '40717d52b23b370354de6538f0344514d4d28bf3f0'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}