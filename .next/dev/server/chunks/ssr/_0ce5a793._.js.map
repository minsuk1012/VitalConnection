{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/choiminsuk/Desktop/vitalconnection%20%281%29/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\nconst slackWebhookUrl = process.env.SLACK_WEBHOOK_URL\n\nif (!supabaseUrl || !supabaseKey) {\n  console.error(\"Missing Supabase environment variables\")\n}\n\nconst supabase = createClient(supabaseUrl!, supabaseKey!)\n\nexport async function submitInquiry(formData: {\n  hospital: string\n  name: string\n  phone: string\n  email: string\n}) {\n  console.log(\"Submitting inquiry:\", formData)\n  \n  // 1. Save to Supabase\n  const { error: dbError } = await supabase\n    .from('consultations')\n    .insert([\n      {\n        hospital_name: formData.hospital,\n        contact_name: formData.name,\n        phone: formData.phone,\n        email: formData.email,\n      },\n    ])\n\n  if (dbError) {\n    console.error(\"Supabase Error:\", dbError)\n    throw new Error(\"Failed to save inquiry\")\n  }\n\n  // 2. Send to Slack\n  if (slackWebhookUrl) {\n    try {\n      const slackMessage = {\n        text: `üöÄ *ÏÉàÎ°úÏö¥ ÏûÖÏ†ê Î¨∏ÏùòÍ∞Ä ÎèÑÏ∞©ÌñàÏäµÎãàÎã§!*`,\n        blocks: [\n          {\n            type: \"header\",\n            text: {\n              type: \"plain_text\",\n              text: \"üöÄ ÏÉàÎ°úÏö¥ ÏûÖÏ†ê Î¨∏Ïùò\",\n              emoji: true\n            }\n          },\n          {\n            type: \"section\",\n            fields: [\n              {\n                type: \"mrkdwn\",\n                text: `*Î≥ëÏõêÎ™Ö:*\\n${formData.hospital}`\n              },\n              {\n                type: \"mrkdwn\",\n                text: `*Îã¥ÎãπÏûê:*\\n${formData.name}`\n              },\n              {\n                type: \"mrkdwn\",\n                text: `*Ïó∞ÎùΩÏ≤ò:*\\n${formData.phone}`\n              },\n              {\n                type: \"mrkdwn\",\n                text: `*Ïù¥Î©îÏùº:*\\n${formData.email}`\n              }\n            ]\n          }\n        ]\n      }\n\n      const response = await fetch(slackWebhookUrl, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(slackMessage),\n      })\n\n      if (!response.ok) {\n        console.error(\"Slack Webhook Error:\", await response.text())\n      }\n    } catch (slackError) {\n      console.error(\"Failed to send Slack notification:\", slackError)\n      // We don't throw here to avoid failing the whole request if just Slack fails\n    }\n  }\n\n  return { success: true }\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;AAEA,MAAM;AACN,MAAM;AACN,MAAM,kBAAkB,QAAQ,GAAG,CAAC,iBAAiB;AAErD;;AAIA,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAc;AAErC,eAAe,cAAc,QAKnC;IACC,QAAQ,GAAG,CAAC,uBAAuB;IAEnC,sBAAsB;IACtB,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,iBACL,MAAM,CAAC;QACN;YACE,eAAe,SAAS,QAAQ;YAChC,cAAc,SAAS,IAAI;YAC3B,OAAO,SAAS,KAAK;YACrB,OAAO,SAAS,KAAK;QACvB;KACD;IAEH,IAAI,SAAS;QACX,QAAQ,KAAK,CAAC,mBAAmB;QACjC,MAAM,IAAI,MAAM;IAClB;IAEA,mBAAmB;IACnB,IAAI,iBAAiB;QACnB,IAAI;YACF,MAAM,eAAe;gBACnB,MAAM,CAAC,uBAAuB,CAAC;gBAC/B,QAAQ;oBACN;wBACE,MAAM;wBACN,MAAM;4BACJ,MAAM;4BACN,MAAM;4BACN,OAAO;wBACT;oBACF;oBACA;wBACE,MAAM;wBACN,QAAQ;4BACN;gCACE,MAAM;gCACN,MAAM,CAAC,QAAQ,EAAE,SAAS,QAAQ,EAAE;4BACtC;4BACA;gCACE,MAAM;gCACN,MAAM,CAAC,QAAQ,EAAE,SAAS,IAAI,EAAE;4BAClC;4BACA;gCACE,MAAM;gCACN,MAAM,CAAC,QAAQ,EAAE,SAAS,KAAK,EAAE;4BACnC;4BACA;gCACE,MAAM;gCACN,MAAM,CAAC,QAAQ,EAAE,SAAS,KAAK,EAAE;4BACnC;yBACD;oBACH;iBACD;YACH;YAEA,MAAM,WAAW,MAAM,MAAM,iBAAiB;gBAC5C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,QAAQ,KAAK,CAAC,wBAAwB,MAAM,SAAS,IAAI;YAC3D;QACF,EAAE,OAAO,YAAY;YACnB,QAAQ,KAAK,CAAC,sCAAsC;QACpD,6EAA6E;QAC/E;IACF;IAEA,OAAO;QAAE,SAAS;IAAK;AACzB;;;IA/EsB;;AAAA,+OAAA"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/choiminsuk/Desktop/vitalconnection%20%281%29/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {submitInquiry as '4085f45f921cac0cb2e8cf927b8b6037b633937254'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}